<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>音乐播放器</title>
    <url>/2020/05/21/%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8/</url>
    <content><![CDATA[<h1 id="First"><a href="#First" class="headerlink" title="First"></a>First</h1><h2 id="Home页面初始化"><a href="#Home页面初始化" class="headerlink" title="Home页面初始化"></a>Home页面初始化</h2><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"home"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></code></pre>
<h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3><pre><code>&lt;style lang=&quot;scss&quot;&gt;
.home {
  position: relative;
  z-index: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
  background-color: #ffedff;
}
&lt;/style&gt;</code></pre><h1 id="SECOND"><a href="#SECOND" class="headerlink" title="SECOND"></a>SECOND</h1><h2 id="从View切换到Componet"><a href="#从View切换到Componet" class="headerlink" title="从View切换到Componet"></a>从View切换到Componet</h2><h3 id="编写player组件"><a href="#编写player组件" class="headerlink" title="编写player组件"></a>编写player组件</h3><p><del>此处只写一个template标签，随后切换回View/home</del></p>
<p>在Home界面中导入写好的组件（此处关于vue组件的复用可以查阅资料）</p>
<h1 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h1><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">import</span> Player <span class="token keyword">from</span> <span class="token string">'../components/Player.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    Player
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h2 id="返回编写Player组件"><a href="#返回编写Player组件" class="headerlink" title="返回编写Player组件"></a>返回编写Player组件</h2><h3 id="First-盒子"><a href="#First-盒子" class="headerlink" title="First-盒子"></a>First-盒子</h3><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"player"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"player_disk"</span><span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"player_control"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"player_progress"</span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></code></pre>
<h3 id="Second-样式"><a href="#Second-样式" class="headerlink" title="Second-样式"></a>Second-样式</h3><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"scss"</span><span class="token operator">></span>
<span class="token punctuation">.</span>player <span class="token punctuation">{</span>
  position<span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  display<span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  max<span class="token operator">-</span>width<span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  max<span class="token operator">-</span>height<span class="token punctuation">:</span> 75px<span class="token punctuation">;</span>
  width<span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  height<span class="token punctuation">:</span> 75px<span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
  background<span class="token operator">-</span>color<span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  box<span class="token operator">-</span>shadow<span class="token punctuation">:</span> <span class="token number">0</span> 30px 60px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token number">0</span> 20px 20px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">95</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>player_disk <span class="token punctuation">{</span>
  flex<span class="token punctuation">:</span> <span class="token number">1.2</span><span class="token punctuation">;</span>
  padding<span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>player_control <span class="token punctuation">{</span>
  flex<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">;</span>
  padding<span class="token punctuation">:</span> 12px <span class="token number">0</span><span class="token punctuation">;</span>
  padding<span class="token operator">-</span>right<span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>player_progress <span class="token punctuation">{</span>
  position<span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  left<span class="token punctuation">:</span> 9px<span class="token punctuation">;</span>
  right<span class="token punctuation">:</span> 9px<span class="token punctuation">;</span>
  top<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  bottom<span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>
  z<span class="token operator">-</span>index<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre>
<h3 id="跳转到Compent中编写Disk组件"><a href="#跳转到Compent中编写Disk组件" class="headerlink" title="跳转到Compent中编写Disk组件"></a>跳转到Compent中编写Disk组件</h3><h4 id="先写template"><a href="#先写template" class="headerlink" title="先写template"></a>先写template</h4><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"disk"</span><span class="token operator">></span>   
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span></code></pre>
<h6 id="把Disk导入到Player中"><a href="#把Disk导入到Player中" class="headerlink" title="把Disk导入到Player中"></a>把Disk导入到Player中</h6><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">import</span> Disk <span class="token keyword">from</span> <span class="token string">'./Disk.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    Disk<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h1 id="插入Disk组件"><a href="#插入Disk组件" class="headerlink" title="插入Disk组件"></a>插入Disk组件</h1><pre class=" language-js"><code class="language-js">  <span class="token operator">&lt;</span>disk <span class="token operator">/</span><span class="token operator">></span></code></pre>
<h1 id="不懂的部分-上传文件"><a href="#不懂的部分-上传文件" class="headerlink" title="不懂的部分-上传文件"></a>不懂的部分-上传文件</h1><pre class=" language-js"><code class="language-js"> <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"disk"</span><span class="token comment" spellcheck="true">// :class="{ disk__playing: isPlaying }"></span>
    <span class="token operator">&lt;</span>label
      <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"disk_cover"</span>
      ref<span class="token operator">=</span><span class="token string">"cover"</span>
      <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"file"</span>
      <span class="token punctuation">:</span>style<span class="token operator">=</span>"<span class="token punctuation">{</span>
        transform<span class="token punctuation">:</span> stopMatrix<span class="token punctuation">,</span>
        backgroundImage<span class="token punctuation">:</span> coverUrl <span class="token operator">?</span> <span class="token template-string"><span class="token string">`url(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>coverUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)`</span></span> <span class="token punctuation">:</span> <span class="token string">''</span>
      <span class="token punctuation">}</span>"
    <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>input
      id<span class="token operator">=</span><span class="token string">"file"</span>
      ref<span class="token operator">=</span><span class="token string">"file"</span>
      type<span class="token operator">=</span><span class="token string">"file"</span>
      accept<span class="token operator">=</span><span class="token string">".mp3"</span>
      multiple
      @change<span class="token operator">=</span><span class="token string">"handleChange"</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre>
<h3 id="编写Disk的CSS"><a href="#编写Disk的CSS" class="headerlink" title="编写Disk的CSS"></a>编写Disk的CSS</h3><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"scss"</span><span class="token operator">></span>
<span class="token punctuation">.</span>disk <span class="token punctuation">{</span>
  position<span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  padding<span class="token operator">-</span>top<span class="token punctuation">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token punctuation">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
  overflow<span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  transform<span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">0.88</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  transform<span class="token operator">-</span>origin<span class="token punctuation">:</span> center bottom<span class="token punctuation">;</span>
  transition<span class="token punctuation">:</span> all <span class="token number">0</span><span class="token punctuation">.</span>6s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>disk input <span class="token punctuation">{</span>
  display<span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>disk_cover <span class="token punctuation">{</span>
  position<span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  top<span class="token punctuation">:</span> <span class="token operator">-</span>10px<span class="token punctuation">;</span>
  left<span class="token punctuation">:</span> <span class="token operator">-</span>10px<span class="token punctuation">;</span>
  right<span class="token punctuation">:</span> <span class="token operator">-</span>10px<span class="token punctuation">;</span>
  bottom<span class="token punctuation">:</span> <span class="token operator">-</span>10px<span class="token punctuation">;</span>
  background<span class="token operator">-</span>image<span class="token punctuation">:</span> radial<span class="token operator">-</span><span class="token function">gradient</span><span class="token punctuation">(</span>circle<span class="token punctuation">,</span> #<span class="token number">444</span> <span class="token number">0</span><span class="token operator">%</span><span class="token punctuation">,</span> #<span class="token number">333</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  background<span class="token operator">-</span>size<span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
  background<span class="token operator">-</span>position<span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>disk_cover<span class="token punctuation">:</span><span class="token punctuation">:</span>after <span class="token punctuation">{</span>
  content<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
  position<span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  top<span class="token punctuation">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
  left<span class="token punctuation">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
  margin<span class="token operator">-</span>left<span class="token punctuation">:</span> <span class="token operator">-</span>8px<span class="token punctuation">;</span>
  margin<span class="token operator">-</span>top<span class="token punctuation">:</span> <span class="token operator">-</span>8px<span class="token punctuation">;</span>
  width<span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  height<span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token punctuation">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
  background<span class="token operator">-</span>image<span class="token punctuation">:</span> linear<span class="token operator">-</span><span class="token function">gradient</span><span class="token punctuation">(</span>45deg<span class="token punctuation">,</span> white<span class="token punctuation">,</span> #dabad1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  box<span class="token operator">-</span>shadow<span class="token punctuation">:</span> <span class="token number">0</span> 1px 1px 1px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>disk__playing <span class="token punctuation">{</span>
  transform<span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  box<span class="token operator">-</span>shadow<span class="token punctuation">:</span> <span class="token number">0</span> 10px 30px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token number">0</span> 20px 20px <span class="token operator">-</span>10px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token number">171</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>disk__playing <span class="token punctuation">.</span>disk_cover <span class="token punctuation">{</span>
  animation<span class="token punctuation">:</span> rotate infinite 6s linear<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    @keyframes rotate <span class="token punctuation">{</span>
  <span class="token keyword">from</span> <span class="token punctuation">{</span>
    transform<span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  to <span class="token punctuation">{</span>
    transform<span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre>
<h3 id="不懂的部分"><a href="#不懂的部分" class="headerlink" title="不懂的部分"></a>不懂的部分</h3><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mapState<span class="token punctuation">,</span> mapMutations <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  data <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      stopMatrix<span class="token punctuation">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'isPlaying'</span><span class="token punctuation">,</span> <span class="token string">'coverUrl'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    isPlaying <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stopMatrix <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>cover<span class="token punctuation">)</span><span class="token punctuation">.</span>transform
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> matrix <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stopMatrix
        <span class="token keyword">this</span><span class="token punctuation">.</span>stopMatrix <span class="token operator">=</span> <span class="token string">''</span>
        <span class="token keyword">const</span> match <span class="token operator">=</span> matrix<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^matrix\(([^,]+),([^,]+)/</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> sin<span class="token punctuation">,</span> cos<span class="token punctuation">]</span> <span class="token operator">=</span> match <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token keyword">const</span> deg <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span>cos<span class="token punctuation">,</span> sin<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">360</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">360</span>
        <span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">]</span>
        styles<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>style <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>style<span class="token punctuation">.</span>cssRules<span class="token punctuation">]</span>
          rules<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>rule <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>rule<span class="token punctuation">.</span>type <span class="token operator">===</span> rule<span class="token punctuation">.</span>KEYFRAMES_RULE <span class="token operator">&amp;&amp;</span> rule<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'rotate'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              rule<span class="token punctuation">.</span>cssRules<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token string">`rotate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>deg<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">deg)`</span></span>
              rule<span class="token punctuation">.</span>cssRules<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token string">`rotate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>deg <span class="token operator">+</span> <span class="token number">360</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">deg)`</span></span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'togglePlay'</span><span class="token punctuation">,</span> <span class="token string">'changeCover'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> handleChange <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre>
<h2 id="编写player-js"><a href="#编写player-js" class="headerlink" title="编写player.js"></a>编写player.js</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Dispatcher</span> <span class="token punctuation">{</span>
  constructor <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  listen <span class="token punctuation">(</span>handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  emit <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>handler <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token function">handler</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Player</span> <span class="token punctuation">{</span>
  constructor <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>audioContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AudioContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>playList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>playIndex <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>emptyNode <span class="token operator">=</span> <span class="token punctuation">{</span>
      file<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      offset<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      start<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      source<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      buffer<span class="token punctuation">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>onPlay <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onPause <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onChange <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onReady <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> readAudioBuffer <span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token punctuation">}</span>


  <span class="token keyword">async</span> append <span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>


  pause <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  stop <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  next <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>


  prev <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>


  <span class="token keyword">get</span> isEmpty <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> current <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> position <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token keyword">set</span> position <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> duration <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> player <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<h3 id="导入这个JS到DISK里"><a href="#导入这个JS到DISK里" class="headerlink" title="导入这个JS到DISK里"></a>导入这个JS到DISK里</h3><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> player <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../player'</span></code></pre>
<h3 id="写方法（DISK）"><a href="#写方法（DISK）" class="headerlink" title="写方法（DISK）"></a>写方法（DISK）</h3><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>file
      <span class="token keyword">const</span> files <span class="token operator">=</span> target<span class="token punctuation">.</span>files <span class="token operator">?</span> target<span class="token punctuation">.</span>files <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> files<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">await</span> player<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mounted <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    player<span class="token punctuation">.</span>onReady<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeCover</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    player<span class="token punctuation">.</span>onChange<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeCover</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    player<span class="token punctuation">.</span>onPlay<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">togglePlay</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    player<span class="token punctuation">.</span>onPause<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">togglePlay</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p><a href="https://github.com/lizzz0523/limni/tree/master/music-player" target="_blank" rel="noopener">源代码</a></p>
<p><a href="https://www.bilibili.com/video/BV1xE411Y7TA" target="_blank" rel="noopener">教学</a></p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>api</tag>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>BlinkFox常用配置</title>
    <url>/2020/05/21/BlinkFox%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<pre><code>---
 标题：typora-vue-theme主题介绍
日期：2018-09-07 09:25:00 
作者：Qi Qi 
img：/source/images/xxx.jpg 
顶部：真实
封面：真实
封面图片
：/ images / 1 .jpg 密码：8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92 
toc：错误
mathjax：错误
摘要：这是您的自定义帖子摘要的内容。如果此属性有一个值，则明信片摘要将显示文本，否则程序将自动截取部分帖子内容作为摘要。
类别：Markdown 
标签：
  - Typora 
  - 降价 
---</code></pre><p><a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank" rel="noopener">源码地址</a></p>
]]></content>
      <categories>
        <category>Theme</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title>Java学习路线（一）</title>
    <url>/2020/05/21/Java%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Java后端学习流程图之基础部分"><a href="#Java后端学习流程图之基础部分" class="headerlink" title="Java后端学习流程图之基础部分"></a>Java后端学习流程图之基础部分</h1><p>编程基础之Java语言 </p>
<p>语言基础 </p>
<pre><code>基础语法
面向对象
接口
容器
异常
泛型
反射
注释
IO
图形化（Swing）</code></pre><p>JVM </p>
<pre><code>类加载机制 
字节码执行机制
JVM内存模型
GC垃圾回收
JVM性能监控与故障定位
JVM调优</code></pre><p>并发多线程  </p>
<pre><code>并发编程基础
线程池
锁
并发容器
原子类
JUC并发工具 </code></pre>]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>后端</tag>
      </tags>
  </entry>
</search>
